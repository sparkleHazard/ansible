---
- name: Apply base and common configuration
  hosts: localhost
  gather_facts: yes
  roles:
    - base
    - common

- name: Apply role-specific configuration
  hosts: keyserver
  gather_facts: yes
  tasks:
    - include_role:
        name: keyserver
      when: host_role | default('base') == "keyserver"
    - include_role:
        name: webserver
      when: host_role | default('base') == "webserver"
